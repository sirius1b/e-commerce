<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1869px" preserveAspectRatio="none" style="width:1682px;height:1869px;" version="1.1" viewBox="0 0 1682 1869" width="1682px" zoomAndPan="magnify"><defs><filter height="300%" id="fblaua0am5z0k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1854.6944" style="stroke: #A80036; stroke-width: 1.0;" width="268" x="1401" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="1475" y="17.897">Internal Interface</text><rect fill="#FFFFFF" filter="url(#fblaua0am5z0k)" height="226.924" style="stroke: #000000; stroke-width: 2.0;" width="1081" x="13" y="641.3642"/><rect fill="#FFFFFF" height="80.3939" style="stroke: none; stroke-width: 1.0;" width="1081" x="13" y="787.8943"/><rect fill="#FFFFFF" filter="url(#fblaua0am5z0k)" height="163.512" style="stroke: #000000; stroke-width: 2.0;" width="722.5" x="13" y="1589.1145"/><rect fill="#FFFFFF" height="80.3939" style="stroke: none; stroke-width: 1.0;" width="722.5" x="13" y="1672.2326"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="331" x2="331" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="676.5" x2="676.5" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1033" x2="1033" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1178" x2="1178" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1334" x2="1334" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1463" x2="1463" y1="89.0679" y2="1769.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1598" x2="1598" y1="89.0679" y2="1769.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="84.9659">User</text><ellipse cx="41.5" cy="13" fill="#FEFECE" filter="url(#fblaua0am5z0k)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,21 L41.5,48 M28.5,29 L54.5,29 M41.5,48 L28.5,63 M41.5,48 L54.5,63 " fill="none" filter="url(#fblaua0am5z0k)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="1783.5924">User</text><ellipse cx="41.5" cy="1797.6944" fill="#FEFECE" filter="url(#fblaua0am5z0k)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,1805.6944 L41.5,1832.6944 M28.5,1813.6944 L54.5,1813.6944 M41.5,1832.6944 L28.5,1847.6944 M41.5,1832.6944 L54.5,1847.6944 " fill="none" filter="url(#fblaua0am5z0k)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="263" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="270" y="72.9659">Client Application</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="263" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="270" y="1790.5924">Client Application</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="627.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="634.5" y="72.9659">Cart Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="627.5" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="634.5" y="1790.5924">Cart Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="983" y="84.9659">Cart Database</text><path d="M1015.5,34 C1015.5,24 1033.5,24 1033.5,24 C1033.5,24 1051.5,24 1051.5,34 L1051.5,60 C1051.5,70 1033.5,70 1033.5,70 C1033.5,70 1015.5,70 1015.5,60 L1015.5,34 " fill="#FEFECE" filter="url(#fblaua0am5z0k)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1015.5,34 C1015.5,44 1033.5,44 1033.5,44 C1033.5,44 1051.5,44 1051.5,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="983" y="1783.5924">Cart Database</text><path d="M1015.5,1797.6944 C1015.5,1787.6944 1033.5,1787.6944 1033.5,1787.6944 C1033.5,1787.6944 1051.5,1787.6944 1051.5,1797.6944 L1051.5,1823.6944 C1051.5,1833.6944 1033.5,1833.6944 1033.5,1833.6944 C1033.5,1833.6944 1015.5,1833.6944 1015.5,1823.6944 L1015.5,1797.6944 " fill="#FEFECE" filter="url(#fblaua0am5z0k)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1015.5,1797.6944 C1015.5,1807.6944 1033.5,1807.6944 1033.5,1807.6944 C1033.5,1807.6944 1051.5,1807.6944 1051.5,1797.6944 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1094" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="1101" y="72.9659">Authentication Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1094" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="1101" y="1790.5924">Authentication Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1273" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1280" y="72.9659">Product Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1273" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1280" y="1790.5924">Product Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1405" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1412" y="72.9659">Pricing Engine</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1405" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1412" y="1790.5924">Pricing Engine</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1531" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1538" y="72.9659">Inventory Service</text><rect fill="#FEFECE" filter="url(#fblaua0am5z0k)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1531" y="1768.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1538" y="1790.5924">Inventory Service</text><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1667" x="3" y="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="120.9209" y2="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="123.9209" y2="123.9209"/><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="126" x="773.5" y="109.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="779.5" y="126.9649">Get Current Cart</text><polygon fill="#A80036" points="319.5,164.4799,329.5,168.4799,319.5,172.4799,323.5,168.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="168.4799" y2="168.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="48.5" y="162.6709">Requests Current Cart (with JWT)</text><polygon fill="#A80036" points="664.5,196.186,674.5,200.186,664.5,204.186,668.5,200.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="670.5" y1="200.186" y2="200.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="338.5" y="194.377">GET /cart (JWT)</text><polygon fill="#A80036" points="1166.5,227.892,1176.5,231.892,1166.5,235.892,1170.5,231.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1172.5" y1="231.892" y2="231.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="683.5" y="226.083">GET /users/me (JWT)</text><polygon fill="#A80036" points="687.5,259.598,677.5,263.598,687.5,267.598,683.5,263.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1177.5" y1="263.598" y2="263.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="693.5" y="257.789">User ID</text><polygon fill="#A80036" points="1021.5,291.304,1031.5,295.304,1021.5,299.304,1025.5,295.304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1027.5" y1="295.304" y2="295.304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="683.5" y="289.495">Retrieve cart for User ID</text><polygon fill="#A80036" points="687.5,323.01,677.5,327.01,687.5,331.01,683.5,327.01" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1032.5" y1="327.01" y2="327.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="693.5" y="321.201">Cart data</text><polygon fill="#A80036" points="342.5,354.716,332.5,358.716,342.5,362.716,338.5,358.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="358.716" y2="358.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="348.5" y="352.907">Cart data</text><polygon fill="#A80036" points="319.5,386.4221,329.5,390.4221,319.5,394.4221,323.5,390.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="390.4221" y2="390.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="48.5" y="384.6131">Displays current cart</text><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1667" x="3" y="420.2751"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="420.2751" y2="420.2751"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="423.2751" y2="423.2751"/><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="125" x="774" y="408.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="780" y="426.3191">Add Item to Cart</text><polygon fill="#A80036" points="319.5,463.8341,329.5,467.8341,319.5,471.8341,323.5,467.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="467.8341" y2="467.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="48.5" y="462.0251">Adds Item to Cart (product ID, quantity, JWT)</text><polygon fill="#A80036" points="664.5,495.5401,674.5,499.5401,664.5,503.5401,668.5,499.5401" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="670.5" y1="499.5401" y2="499.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="338.5" y="493.7311">POST /cart/add (product ID, quantity, JWT)</text><polygon fill="#A80036" points="1166.5,527.2461,1176.5,531.2461,1166.5,535.2461,1170.5,531.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1172.5" y1="531.2461" y2="531.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="683.5" y="525.4371">GET /users/me (JWT)</text><polygon fill="#A80036" points="687.5,558.9521,677.5,562.9521,687.5,566.9521,683.5,562.9521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1177.5" y1="562.9521" y2="562.9521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="693.5" y="557.1431">User ID</text><polygon fill="#A80036" points="1322,590.6582,1332,594.6582,1322,598.6582,1326,594.6582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1328" y1="594.6582" y2="594.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="683.5" y="588.8492">Get product details (product ID)</text><polygon fill="#A80036" points="687.5,622.3642,677.5,626.3642,687.5,630.3642,683.5,626.3642" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1333" y1="626.3642" y2="626.3642"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="693.5" y="620.5552">Product details (name, price, stock)</text><path d="M13,641.3642 L76,641.3642 L76,650.3642 L66,660.3642 L13,660.3642 L13,641.3642 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="226.924" style="stroke: #000000; stroke-width: 2.0;" width="1081" x="13" y="641.3642"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="656.2612">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="91" y="655.1231">[Stock is sufficient]</text><polygon fill="#A80036" points="1021.5,680.7762,1031.5,684.7762,1021.5,688.7762,1025.5,684.7762" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1027.5" y1="684.7762" y2="684.7762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="683.5" y="678.9672">Add/update item in cart for User ID</text><polygon fill="#A80036" points="687.5,712.4822,677.5,716.4822,687.5,720.4822,683.5,716.4822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1032.5" y1="716.4822" y2="716.4822"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="693.5" y="710.6732">Cart updated</text><polygon fill="#A80036" points="342.5,744.1882,332.5,748.1882,342.5,752.1882,338.5,748.1882" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="748.1882" y2="748.1882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="348.5" y="742.3792">Cart updated</text><polygon fill="#A80036" points="319.5,775.8943,329.5,779.8943,319.5,783.8943,323.5,779.8943" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="779.8943" y2="779.8943"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="48.5" y="774.0853">Cart updated confirmation</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1094" y1="788.8943" y2="788.8943"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="800.6532">[Stock is insufficient]</text><polygon fill="#A80036" points="342.5,824.5822,332.5,828.5822,342.5,832.5822,338.5,828.5822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="828.5822" y2="828.5822"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="348.5" y="822.7732">Insufficient stock</text><polygon fill="#A80036" points="319.5,856.2882,329.5,860.2882,319.5,864.2882,323.5,860.2882" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="860.2882" y2="860.2882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="48.5" y="854.4792">Insufficient stock message</text><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1667" x="3" y="897.1412"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="897.1412" y2="897.1412"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="900.1412" y2="900.1412"/><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="171" x="751" y="885.2882"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="757" y="903.1852">Remove Item from Cart</text><polygon fill="#A80036" points="319.5,940.7002,329.5,944.7002,319.5,948.7002,323.5,944.7002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="944.7002" y2="944.7002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="48.5" y="938.8912">Removes Item from Cart (item ID, JWT)</text><polygon fill="#A80036" points="664.5,972.4062,674.5,976.4062,664.5,980.4062,668.5,976.4062" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="670.5" y1="976.4062" y2="976.4062"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="338.5" y="970.5972">POST /cart/remove (item ID, JWT)</text><polygon fill="#A80036" points="1166.5,1004.1123,1176.5,1008.1123,1166.5,1012.1123,1170.5,1008.1123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1172.5" y1="1008.1123" y2="1008.1123"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="683.5" y="1002.3032">GET /users/me (JWT)</text><polygon fill="#A80036" points="687.5,1035.8183,677.5,1039.8183,687.5,1043.8183,683.5,1039.8183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1177.5" y1="1039.8183" y2="1039.8183"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="693.5" y="1034.0093">User ID</text><polygon fill="#A80036" points="1021.5,1067.5243,1031.5,1071.5243,1021.5,1075.5243,1025.5,1071.5243" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1027.5" y1="1071.5243" y2="1071.5243"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="683.5" y="1065.7153">Remove item from cart for User ID</text><polygon fill="#A80036" points="687.5,1099.2303,677.5,1103.2303,687.5,1107.2303,683.5,1103.2303" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1032.5" y1="1103.2303" y2="1103.2303"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="693.5" y="1097.4213">Cart updated</text><polygon fill="#A80036" points="342.5,1130.9363,332.5,1134.9363,342.5,1138.9363,338.5,1134.9363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="1134.9363" y2="1134.9363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="348.5" y="1129.1273">Cart updated</text><polygon fill="#A80036" points="319.5,1162.6423,329.5,1166.6423,319.5,1170.6423,323.5,1166.6423" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="1166.6423" y2="1166.6423"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="48.5" y="1160.8333">Cart updated confirmation</text><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1667" x="3" y="1196.4953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="1196.4953" y2="1196.4953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1670" y1="1199.4953" y2="1199.4953"/><rect fill="#EEEEEE" filter="url(#fblaua0am5z0k)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="133" x="770" y="1184.6423"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="776" y="1202.5393">Initiate Checkout</text><polygon fill="#A80036" points="319.5,1240.0544,329.5,1244.0544,319.5,1248.0544,323.5,1244.0544" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="1244.0544" y2="1244.0544"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="48.5" y="1238.2454">Initiates Checkout (JWT)</text><polygon fill="#A80036" points="664.5,1271.7604,674.5,1275.7604,664.5,1279.7604,668.5,1275.7604" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="670.5" y1="1275.7604" y2="1275.7604"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="338.5" y="1269.9514">POST /cart/checkout (JWT)</text><polygon fill="#A80036" points="1166.5,1303.4664,1176.5,1307.4664,1166.5,1311.4664,1170.5,1307.4664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1172.5" y1="1307.4664" y2="1307.4664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="683.5" y="1301.6574">GET /users/me (JWT)</text><polygon fill="#A80036" points="687.5,1335.1724,677.5,1339.1724,687.5,1343.1724,683.5,1339.1724" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1177.5" y1="1339.1724" y2="1339.1724"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="693.5" y="1333.3634">User ID</text><polygon fill="#A80036" points="1021.5,1366.8784,1031.5,1370.8784,1021.5,1374.8784,1025.5,1370.8784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1027.5" y1="1370.8784" y2="1370.8784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="683.5" y="1365.0694">Retrieve cart for User ID</text><polygon fill="#A80036" points="687.5,1398.5844,677.5,1402.5844,687.5,1406.5844,683.5,1402.5844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1032.5" y1="1402.5844" y2="1402.5844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="693.5" y="1396.7754">Cart data with item IDs and quantities</text><polygon fill="#A80036" points="1322,1430.2905,1332,1434.2905,1322,1438.2905,1326,1434.2905" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1328" y1="1434.2905" y2="1434.2905"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="683.5" y="1428.4815">Get product details for all items</text><polygon fill="#A80036" points="687.5,1461.9965,677.5,1465.9965,687.5,1469.9965,683.5,1465.9965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1333" y1="1465.9965" y2="1465.9965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="693.5" y="1460.1875">List of product details (name, price, stock)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="718.5" y1="1497.7025" y2="1497.7025"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="718.5" x2="718.5" y1="1497.7025" y2="1510.7025"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="677.5" x2="718.5" y1="1510.7025" y2="1510.7025"/><polygon fill="#A80036" points="687.5,1506.7025,677.5,1510.7025,687.5,1514.7025,683.5,1510.7025" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="683.5" y="1491.8935">Calculate total price (cart items with quantities and prices)</text><polygon fill="#A80036" points="1586,1538.4085,1596,1542.4085,1586,1546.4085,1590,1542.4085" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="676.5" x2="1592" y1="1542.4085" y2="1542.4085"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="683.5" y="1536.5995">Lock stock (cart items with quantities)</text><polygon fill="#A80036" points="687.5,1570.1145,677.5,1574.1145,687.5,1578.1145,683.5,1574.1145" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="681.5" x2="1597" y1="1574.1145" y2="1574.1145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="693.5" y="1568.3055">Stock lock status (Success/Failure)</text><path d="M13,1589.1145 L76,1589.1145 L76,1598.1145 L66,1608.1145 L13,1608.1145 L13,1589.1145 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="163.512" style="stroke: #000000; stroke-width: 2.0;" width="722.5" x="13" y="1589.1145"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="1604.0115">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="91" y="1602.8734">[Stock lock successful]</text><polygon fill="#A80036" points="342.5,1628.5266,332.5,1632.5266,342.5,1636.5266,338.5,1632.5266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="1632.5266" y2="1632.5266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="348.5" y="1626.7176">Checkout initiated (redirect to payment/confirmation)</text><polygon fill="#A80036" points="319.5,1660.2326,329.5,1664.2326,319.5,1668.2326,323.5,1664.2326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="1664.2326" y2="1664.2326"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="48.5" y="1658.4236">Redirects to next step</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="735.5" y1="1673.2326" y2="1673.2326"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="18" y="1684.9915">[Stock lock failed]</text><polygon fill="#A80036" points="342.5,1708.9205,332.5,1712.9205,342.5,1716.9205,338.5,1712.9205" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="675.5" y1="1712.9205" y2="1712.9205"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="348.5" y="1707.1115">Checkout failed (stock unavailable)</text><polygon fill="#A80036" points="319.5,1740.6265,329.5,1744.6265,319.5,1748.6265,323.5,1744.6265" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="1744.6265" y2="1744.6265"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="48.5" y="1738.8175">Stock unavailable message</text><!--MD5=[5463af269fa9c10176c74faea31dc270]
@startuml cart-flow
actor User
participant "Client Application" as Client
participant "Cart Service" as CartSvc
database "Cart Database" as CartDB
participant "Authentication Service" as AuthService
participant "Product Service" as ProductSvc

box "Internal Interface" #LightBlue
    participant "Pricing Engine" as Pricing
    participant "Inventory Service" as Inventory
end box

== Get Current Cart ==
User -> Client: Requests Current Cart (with JWT)
Client -> CartSvc: GET /cart (JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Retrieve cart for User ID
CartDB - -> CartSvc: Cart data
CartSvc - -> Client: Cart data
Client <- - User: Displays current cart

== Add Item to Cart ==
User -> Client: Adds Item to Cart (product ID, quantity, JWT)
Client -> CartSvc: POST /cart/add (product ID, quantity, JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> ProductSvc: Get product details (product ID)
ProductSvc - -> CartSvc: Product details (name, price, stock)
alt Stock is sufficient
    CartSvc -> CartDB: Add/update item in cart for User ID
    CartDB - -> CartSvc: Cart updated
    CartSvc - -> Client: Cart updated
    Client <- - User: Cart updated confirmation
else Stock is insufficient
    CartSvc - -> Client: Insufficient stock
    Client <- - User: Insufficient stock message
end

== Remove Item from Cart ==
User -> Client: Removes Item from Cart (item ID, JWT)
Client -> CartSvc: POST /cart/remove (item ID, JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Remove item from cart for User ID
CartDB - -> CartSvc: Cart updated
CartSvc - -> Client: Cart updated
Client <- - User: Cart updated confirmation

== Initiate Checkout ==
User -> Client: Initiates Checkout (JWT)
Client -> CartSvc: POST /cart/checkout (JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Retrieve cart for User ID
CartDB - -> CartSvc: Cart data with item IDs and quantities
CartSvc -> ProductSvc: Get product details for all items
ProductSvc - -> CartSvc: List of product details (name, price, stock)
CartSvc -> CartSvc: Calculate total price (cart items with quantities and prices)
CartSvc -> Inventory: Lock stock (cart items with quantities)
Inventory - -> CartSvc: Stock lock status (Success/Failure)
alt Stock lock successful
    CartSvc - -> Client: Checkout initiated (redirect to payment/confirmation)
    Client <- - User: Redirects to next step
else Stock lock failed
    CartSvc - -> Client: Checkout failed (stock unavailable)
    Client <- - User: Stock unavailable message
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 15:52:07 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.6+7-Ubuntu-124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>