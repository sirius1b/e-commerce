<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1952px" preserveAspectRatio="none" style="width:1592px;height:1952px;" version="1.1" viewBox="0 0 1592 1952" width="1592px" zoomAndPan="magnify"><defs><filter height="300%" id="f1693camhn6iey" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1937.0883" style="stroke: #A80036; stroke-width: 1.0;" width="142" x="1332" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="1343" y="17.897">Internal Interface</text><rect fill="#FFFFFF" filter="url(#f1693camhn6iey)" height="226.924" style="stroke: #000000; stroke-width: 2.0;" width="1012" x="13" y="641.3642"/><rect fill="#FFFFFF" height="80.3939" style="stroke: none; stroke-width: 1.0;" width="1012" x="13" y="787.8943"/><rect fill="#FFFFFF" filter="url(#f1693camhn6iey)" height="245.9059" style="stroke: #000000; stroke-width: 2.0;" width="1557" x="13" y="1589.1145"/><rect fill="#FFFFFF" filter="url(#f1693camhn6iey)" height="100.0999" style="stroke: #000000; stroke-width: 2.0;" width="413.5" x="253" y="1647.5266"/><rect fill="#FFFFFF" height="48.6879" style="stroke: none; stroke-width: 1.0;" width="413.5" x="253" y="1698.9386"/><rect fill="#FFFFFF" height="80.3939" style="stroke: none; stroke-width: 1.0;" width="1557" x="13" y="1754.6265"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="331" x2="331" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="607.5" x2="607.5" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="964" x2="964" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1109" x2="1109" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1265" x2="1265" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1403" x2="1403" y1="89.0679" y2="1852.0204"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1520" x2="1520" y1="89.0679" y2="1852.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="84.9659">User</text><ellipse cx="41.5" cy="13" fill="#FEFECE" filter="url(#f1693camhn6iey)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,21 L41.5,48 M28.5,29 L54.5,29 M41.5,48 L28.5,63 M41.5,48 L54.5,63 " fill="none" filter="url(#f1693camhn6iey)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="23" y="1865.9864">User</text><ellipse cx="41.5" cy="1880.0883" fill="#FEFECE" filter="url(#f1693camhn6iey)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41.5,1888.0883 L41.5,1915.0883 M28.5,1896.0883 L54.5,1896.0883 M41.5,1915.0883 L28.5,1930.0883 M41.5,1915.0883 L54.5,1930.0883 " fill="none" filter="url(#f1693camhn6iey)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="263" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="270" y="72.9659">Client Application</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="263" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="270" y="1872.9864">Client Application</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="558.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="565.5" y="72.9659">Cart Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="558.5" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="565.5" y="1872.9864">Cart Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="914" y="84.9659">Cart Database</text><path d="M946.5,34 C946.5,24 964.5,24 964.5,24 C964.5,24 982.5,24 982.5,34 L982.5,60 C982.5,70 964.5,70 964.5,70 C964.5,70 946.5,70 946.5,60 L946.5,34 " fill="#FEFECE" filter="url(#f1693camhn6iey)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M946.5,34 C946.5,44 964.5,44 964.5,44 C964.5,44 982.5,44 982.5,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="914" y="1865.9864">Cart Database</text><path d="M946.5,1880.0883 C946.5,1870.0883 964.5,1870.0883 964.5,1870.0883 C964.5,1870.0883 982.5,1870.0883 982.5,1880.0883 L982.5,1906.0883 C982.5,1916.0883 964.5,1916.0883 964.5,1916.0883 C964.5,1916.0883 946.5,1916.0883 946.5,1906.0883 L946.5,1880.0883 " fill="#FEFECE" filter="url(#f1693camhn6iey)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M946.5,1880.0883 C946.5,1890.0883 964.5,1890.0883 964.5,1890.0883 C964.5,1890.0883 982.5,1890.0883 982.5,1880.0883 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1025" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="1032" y="72.9659">Authentication Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1025" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="1032" y="1872.9864">Authentication Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1204" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1211" y="72.9659">Product Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1204" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1211" y="1872.9864">Product Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1336" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1343" y="72.9659">Inventory Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1336" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1343" y="1872.9864">Inventory Service</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="1480" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1487" y="72.9659">OrderSvc</text><rect fill="#FEFECE" filter="url(#f1693camhn6iey)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="1480" y="1851.0204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1487" y="1872.9864">OrderSvc</text><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1577" x="3" y="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="120.9209" y2="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="123.9209" y2="123.9209"/><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="126" x="728.5" y="109.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="734.5" y="126.9649">Get Current Cart</text><polygon fill="#A80036" points="319.5,164.4799,329.5,168.4799,319.5,172.4799,323.5,168.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="168.4799" y2="168.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="48.5" y="162.6709">Requests Current Cart (with JWT)</text><polygon fill="#A80036" points="595.5,196.186,605.5,200.186,595.5,204.186,599.5,200.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="601.5" y1="200.186" y2="200.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="338.5" y="194.377">GET /cart (JWT)</text><polygon fill="#A80036" points="1097.5,227.892,1107.5,231.892,1097.5,235.892,1101.5,231.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1103.5" y1="231.892" y2="231.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="614.5" y="226.083">GET /users/me (JWT)</text><polygon fill="#A80036" points="618.5,259.598,608.5,263.598,618.5,267.598,614.5,263.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1108.5" y1="263.598" y2="263.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="624.5" y="257.789">User ID</text><polygon fill="#A80036" points="952.5,291.304,962.5,295.304,952.5,299.304,956.5,295.304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="958.5" y1="295.304" y2="295.304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="614.5" y="289.495">Retrieve cart for User ID</text><polygon fill="#A80036" points="618.5,323.01,608.5,327.01,618.5,331.01,614.5,327.01" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="963.5" y1="327.01" y2="327.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="624.5" y="321.201">Cart data</text><polygon fill="#A80036" points="342.5,354.716,332.5,358.716,342.5,362.716,338.5,358.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="358.716" y2="358.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="348.5" y="352.907">Cart data</text><polygon fill="#A80036" points="319.5,386.4221,329.5,390.4221,319.5,394.4221,323.5,390.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="390.4221" y2="390.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="48.5" y="384.6131">Displays current cart</text><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1577" x="3" y="420.2751"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="420.2751" y2="420.2751"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="423.2751" y2="423.2751"/><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="125" x="729" y="408.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="735" y="426.3191">Add Item to Cart</text><polygon fill="#A80036" points="319.5,463.8341,329.5,467.8341,319.5,471.8341,323.5,467.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="467.8341" y2="467.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="48.5" y="462.0251">Adds Item to Cart (product ID, quantity, JWT)</text><polygon fill="#A80036" points="595.5,495.5401,605.5,499.5401,595.5,503.5401,599.5,499.5401" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="601.5" y1="499.5401" y2="499.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="338.5" y="493.7311">POST /cart/add (product ID, quantity, JWT)</text><polygon fill="#A80036" points="1097.5,527.2461,1107.5,531.2461,1097.5,535.2461,1101.5,531.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1103.5" y1="531.2461" y2="531.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="614.5" y="525.4371">GET /users/me (JWT)</text><polygon fill="#A80036" points="618.5,558.9521,608.5,562.9521,618.5,566.9521,614.5,562.9521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1108.5" y1="562.9521" y2="562.9521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="624.5" y="557.1431">User ID</text><polygon fill="#A80036" points="1253,590.6582,1263,594.6582,1253,598.6582,1257,594.6582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1259" y1="594.6582" y2="594.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="614.5" y="588.8492">Get product details (product ID)</text><polygon fill="#A80036" points="618.5,622.3642,608.5,626.3642,618.5,630.3642,614.5,626.3642" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1264" y1="626.3642" y2="626.3642"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="624.5" y="620.5552">Product details (name, price, stock)</text><path d="M13,641.3642 L76,641.3642 L76,650.3642 L66,660.3642 L13,660.3642 L13,641.3642 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="226.924" style="stroke: #000000; stroke-width: 2.0;" width="1012" x="13" y="641.3642"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="656.2612">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="91" y="655.1231">[Stock is sufficient]</text><polygon fill="#A80036" points="952.5,680.7762,962.5,684.7762,952.5,688.7762,956.5,684.7762" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="958.5" y1="684.7762" y2="684.7762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="614.5" y="678.9672">Add/update item in cart for User ID</text><polygon fill="#A80036" points="618.5,712.4822,608.5,716.4822,618.5,720.4822,614.5,716.4822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="963.5" y1="716.4822" y2="716.4822"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="624.5" y="710.6732">Cart updated</text><polygon fill="#A80036" points="342.5,744.1882,332.5,748.1882,342.5,752.1882,338.5,748.1882" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="748.1882" y2="748.1882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="348.5" y="742.3792">Cart updated</text><polygon fill="#A80036" points="319.5,775.8943,329.5,779.8943,319.5,783.8943,323.5,779.8943" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="779.8943" y2="779.8943"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="48.5" y="774.0853">Cart updated confirmation</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1025" y1="788.8943" y2="788.8943"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="800.6532">[Stock is insufficient]</text><polygon fill="#A80036" points="342.5,824.5822,332.5,828.5822,342.5,832.5822,338.5,828.5822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="828.5822" y2="828.5822"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="348.5" y="822.7732">Insufficient stock</text><polygon fill="#A80036" points="319.5,856.2882,329.5,860.2882,319.5,864.2882,323.5,860.2882" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="860.2882" y2="860.2882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="48.5" y="854.4792">Insufficient stock message</text><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1577" x="3" y="897.1412"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="897.1412" y2="897.1412"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="900.1412" y2="900.1412"/><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="171" x="706" y="885.2882"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="712" y="903.1852">Remove Item from Cart</text><polygon fill="#A80036" points="319.5,940.7002,329.5,944.7002,319.5,948.7002,323.5,944.7002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="944.7002" y2="944.7002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="48.5" y="938.8912">Removes Item from Cart (item ID, JWT)</text><polygon fill="#A80036" points="595.5,972.4062,605.5,976.4062,595.5,980.4062,599.5,976.4062" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="601.5" y1="976.4062" y2="976.4062"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="338.5" y="970.5972">POST /cart/remove (item ID, JWT)</text><polygon fill="#A80036" points="1097.5,1004.1123,1107.5,1008.1123,1097.5,1012.1123,1101.5,1008.1123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1103.5" y1="1008.1123" y2="1008.1123"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="614.5" y="1002.3032">GET /users/me (JWT)</text><polygon fill="#A80036" points="618.5,1035.8183,608.5,1039.8183,618.5,1043.8183,614.5,1039.8183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1108.5" y1="1039.8183" y2="1039.8183"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="624.5" y="1034.0093">User ID</text><polygon fill="#A80036" points="952.5,1067.5243,962.5,1071.5243,952.5,1075.5243,956.5,1071.5243" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="958.5" y1="1071.5243" y2="1071.5243"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="614.5" y="1065.7153">Remove item from cart for User ID</text><polygon fill="#A80036" points="618.5,1099.2303,608.5,1103.2303,618.5,1107.2303,614.5,1103.2303" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="963.5" y1="1103.2303" y2="1103.2303"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="624.5" y="1097.4213">Cart updated</text><polygon fill="#A80036" points="342.5,1130.9363,332.5,1134.9363,342.5,1138.9363,338.5,1134.9363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="1134.9363" y2="1134.9363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="348.5" y="1129.1273">Cart updated</text><polygon fill="#A80036" points="319.5,1162.6423,329.5,1166.6423,319.5,1170.6423,323.5,1166.6423" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="1166.6423" y2="1166.6423"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="48.5" y="1160.8333">Cart updated confirmation</text><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1577" x="3" y="1196.4953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="1196.4953" y2="1196.4953"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1580" y1="1199.4953" y2="1199.4953"/><rect fill="#EEEEEE" filter="url(#f1693camhn6iey)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="133" x="725" y="1184.6423"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="731" y="1202.5393">Initiate Checkout</text><polygon fill="#A80036" points="319.5,1240.0544,329.5,1244.0544,319.5,1248.0544,323.5,1244.0544" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="325.5" y1="1244.0544" y2="1244.0544"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="48.5" y="1238.2454">Initiates Checkout (JWT)</text><polygon fill="#A80036" points="595.5,1271.7604,605.5,1275.7604,595.5,1279.7604,599.5,1275.7604" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="601.5" y1="1275.7604" y2="1275.7604"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="338.5" y="1269.9514">POST /cart/checkout (JWT)</text><polygon fill="#A80036" points="1097.5,1303.4664,1107.5,1307.4664,1097.5,1311.4664,1101.5,1307.4664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1103.5" y1="1307.4664" y2="1307.4664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="614.5" y="1301.6574">GET /users/me (JWT)</text><polygon fill="#A80036" points="618.5,1335.1724,608.5,1339.1724,618.5,1343.1724,614.5,1339.1724" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1108.5" y1="1339.1724" y2="1339.1724"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="624.5" y="1333.3634">User ID</text><polygon fill="#A80036" points="952.5,1366.8784,962.5,1370.8784,952.5,1374.8784,956.5,1370.8784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="958.5" y1="1370.8784" y2="1370.8784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="614.5" y="1365.0694">Retrieve cart for User ID</text><polygon fill="#A80036" points="618.5,1398.5844,608.5,1402.5844,618.5,1406.5844,614.5,1402.5844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="963.5" y1="1402.5844" y2="1402.5844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="624.5" y="1396.7754">Cart data with item IDs and quantities</text><polygon fill="#A80036" points="1253,1430.2905,1263,1434.2905,1253,1438.2905,1257,1434.2905" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1259" y1="1434.2905" y2="1434.2905"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="614.5" y="1428.4815">Get product details for all items</text><polygon fill="#A80036" points="618.5,1461.9965,608.5,1465.9965,618.5,1469.9965,614.5,1465.9965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1264" y1="1465.9965" y2="1465.9965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="624.5" y="1460.1875">List of product details (name, price, stock)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="649.5" y1="1497.7025" y2="1497.7025"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="649.5" x2="649.5" y1="1497.7025" y2="1510.7025"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="608.5" x2="649.5" y1="1510.7025" y2="1510.7025"/><polygon fill="#A80036" points="618.5,1506.7025,608.5,1510.7025,618.5,1514.7025,614.5,1510.7025" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="614.5" y="1491.8935">Calculate total price (cart items with quantities and prices)</text><polygon fill="#A80036" points="1391,1538.4085,1401,1542.4085,1391,1546.4085,1395,1542.4085" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1397" y1="1542.4085" y2="1542.4085"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="614.5" y="1536.5995">Lock stock (cart items with quantities)</text><polygon fill="#A80036" points="618.5,1570.1145,608.5,1574.1145,618.5,1578.1145,614.5,1574.1145" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="612.5" x2="1402" y1="1574.1145" y2="1574.1145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="624.5" y="1568.3055">Stock lock status (Success/Failure)</text><path d="M13,1589.1145 L76,1589.1145 L76,1598.1145 L66,1608.1145 L13,1608.1145 L13,1589.1145 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="245.9059" style="stroke: #000000; stroke-width: 2.0;" width="1557" x="13" y="1589.1145"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="1604.0115">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="91" y="1602.8734">[Stock lock successful]</text><polygon fill="#A80036" points="1508,1628.5266,1518,1632.5266,1508,1636.5266,1512,1632.5266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607.5" x2="1514" y1="1632.5266" y2="1632.5266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="614.5" y="1626.7176">POST /orders (order details, user ID)</text><path d="M253,1647.5266 L316,1647.5266 L316,1656.5266 L306,1666.5266 L253,1666.5266 L253,1647.5266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="100.0999" style="stroke: #000000; stroke-width: 2.0;" width="413.5" x="253" y="1647.5266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="268" y="1662.4236">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="331" y="1661.2855">[Order Confirmed]</text><polygon fill="#A80036" points="342.5,1686.9386,332.5,1690.9386,342.5,1694.9386,338.5,1690.9386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="1690.9386" y2="1690.9386"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="348.5" y="1685.1296">Checkout confirmed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="253" x2="666.5" y1="1699.9386" y2="1699.9386"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="258" y="1711.6975">[not confirmed]</text><polygon fill="#A80036" points="342.5,1735.6265,332.5,1739.6265,342.5,1743.6265,338.5,1739.6265" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="1739.6265" y2="1739.6265"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="348.5" y="1733.8175">Checkout failed (stock unavailable)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1570" y1="1755.6265" y2="1755.6265"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="18" y="1767.3854">[Stock lock failed]</text><polygon fill="#A80036" points="342.5,1791.3144,332.5,1795.3144,342.5,1799.3144,338.5,1795.3144" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="336.5" x2="606.5" y1="1795.3144" y2="1795.3144"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="348.5" y="1789.5054">Checkout failed (stock unavailable)</text><polygon fill="#A80036" points="319.5,1823.0204,329.5,1827.0204,319.5,1831.0204,323.5,1827.0204" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41.5" x2="325.5" y1="1827.0204" y2="1827.0204"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="48.5" y="1821.2114">Stock unavailable message</text><!--MD5=[3e872f903f16dedfa8fffad43d4eb475]
@startuml
actor User
participant "Client Application" as Client
participant "Cart Service" as CartSvc
database "Cart Database" as CartDB
participant "Authentication Service" as AuthService
participant "Product Service" as ProductSvc

box "Internal Interface" #LightBlue
    participant "Inventory Service" as Inventory
end box

== Get Current Cart ==
User -> Client: Requests Current Cart (with JWT)
Client -> CartSvc: GET /cart (JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Retrieve cart for User ID
CartDB - -> CartSvc: Cart data
CartSvc - -> Client: Cart data
Client <- - User: Displays current cart

== Add Item to Cart ==
User -> Client: Adds Item to Cart (product ID, quantity, JWT)
Client -> CartSvc: POST /cart/add (product ID, quantity, JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> ProductSvc: Get product details (product ID)
ProductSvc - -> CartSvc: Product details (name, price, stock)
alt Stock is sufficient
    CartSvc -> CartDB: Add/update item in cart for User ID
    CartDB - -> CartSvc: Cart updated
    CartSvc - -> Client: Cart updated
    Client <- - User: Cart updated confirmation
else Stock is insufficient
    CartSvc - -> Client: Insufficient stock
    Client <- - User: Insufficient stock message
end

== Remove Item from Cart ==
User -> Client: Removes Item from Cart (item ID, JWT)
Client -> CartSvc: POST /cart/remove (item ID, JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Remove item from cart for User ID
CartDB - -> CartSvc: Cart updated
CartSvc - -> Client: Cart updated
Client <- - User: Cart updated confirmation

== Initiate Checkout ==
User -> Client: Initiates Checkout (JWT)
Client -> CartSvc: POST /cart/checkout (JWT)
CartSvc -> AuthService: GET /users/me (JWT)
AuthService - -> CartSvc: User ID
CartSvc -> CartDB: Retrieve cart for User ID
CartDB - -> CartSvc: Cart data with item IDs and quantities
CartSvc -> ProductSvc: Get product details for all items
ProductSvc - -> CartSvc: List of product details (name, price, stock)
CartSvc -> CartSvc: Calculate total price (cart items with quantities and prices)
CartSvc -> Inventory: Lock stock (cart items with quantities)
Inventory - -> CartSvc: Stock lock status (Success/Failure)
alt Stock lock successful
    CartSvc -> OrderSvc: POST /orders (order details, user ID)
    alt Order Confirmed


    CartSvc - -> Client: Checkout confirmed
    else not confirmed
    CartSvc - -> Client: Checkout failed (stock unavailable)


end

else Stock lock failed
    CartSvc - -> Client: Checkout failed (stock unavailable)
    Client <- - User: Stock unavailable message
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 15:52:07 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.6+7-Ubuntu-124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>